import*as i from"./dom.js";function s(e){let n=Object.keys(e._views);for(let t=0;t<n.length;t++){let o=n[t];e._views[o].collect()}}function r(e){let n=Object.keys(e._components);for(let t=0;t<n.length;t++){let o=n[t];e._components[o]()}}function l(e){let n=Object.keys(e._views);for(let t=0;t<n.length;t++){let o=n[t];e._views[o].update()}}export function setup(){const e={SETUP:!0,time:performance.now(),delta:0,_images:{},_fonts:{},_views:{},_components:{},view(n,t="dom"){let o;return t==="dom"&&(o=i.setup(data)),data._views[n]=o,o},image(){},font(){},json(){},component(n,t){if(n in e._components)return e._components[n];e._components[n]=t},run(){let n=performance.now();e.delta=(n-e.time)/1e3,e.time=n,s(e),r(e),l(e),window.requestAnimationFrame(()=>{run()})}};return e}
