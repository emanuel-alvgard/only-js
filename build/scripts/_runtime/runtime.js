import*as i from"./dom.mjs";function r(e){let t=Object.keys(e._views);for(let n=0;n<t.length;n++){let o=t[n];e._views[o].collect()}}function a(e){let t=Object.keys(e._components);for(let n=0;n<t.length;n++){let o=t[n];e._components[o]()}}function m(e){let t=Object.keys(e._views);for(let n=0;n<t.length;n++){let o=t[n];e._views[o].update()}}const s={data:{},view(e,t="dom"){let n;return t==="dom"&&(n=i.setup(data)),data._views[e]=n,n},image(){},font(){},json(){}};export function setup(){const e={SETUP:!0,time:performance.now(),delta:0,_images:{},_fonts:{},_views:{},_components:{},component(t,n){if(t in e._components)return e._components[t];e._components[t]=n},run(){let t=performance.now();e.delta=(t-e.time)/1e3,e.time=t,r(e),a(e),m(e),window.requestAnimationFrame(()=>{run()})}};return e}export function use(e){return s.data._images=e._images,s.data._fonts=e._fonts,s.data._views=e._views,s.data._components=e._components,s}
