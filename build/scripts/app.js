(()=>{var p=(t,n,e)=>Math.min(Math.max(t,n),e);function f(t,n,e){return(n-t)*e+t}function T(t,n,e,l){let _=f(t,n,l),u=f(n,e,l);return f(_,u,l)}function D(t,n,e,l,_){let u=T(t,n,e,_),a=T(n,e,l,_);return f(u,a,_)}function b(t,n,e,l,_,u,a,c,d,h){let i={_id:e,_start:_,_end:u,_time:a,_delay:c,_curve:d,_event:h,_direction:0,_distance:0,_speed:0,_curve_func:null,_delay_timer:0,_run_timer:0,_progress:0,_pause:!1,_stop:!0,start(){return i._pause=!1,i._stop=!1,i},stop(){return i._pause=!1,i._stop=!0,i},pause(){return i._pause=!0,i},update(){let o=t.delta;if(i._delay_timer+=o*1e3,!(i._delay_timer>=i._delay)){if(i._run_timer>=i._time){n[l](i._end),i._event!==null&&(n[i._event]=!0);return}i._progress+=i._speed*i._curve_func(i._curve,i.run_timer/i._time)*o}},remove(){}};switch(u<_?(i._direction=-1,i._distance=_-u):(i._direction=1,i._distance=u-_),i._speed=i._distance/i._time*1e3,d.length){case 2:i._curve_func=function(o,s){f(o[0],o[1],p(s,0,1))};break;case 3:i._curve_func=function(o,s){T(o[0],o[1],o[2],p(s,0,1))};break;case 4:i._curve_func=function(o,s){D(o[0],o[1],o[2],o[3],p(s,0,1))};break}return i}function g(t,n,e=null){e!==null&&t[n]<e&&(t[n]=e)}function E(t,n,e=null){e!==null&&t[n]>e&&(t[n]=e)}function m(t,n,e=null,l=null,_=null,u=0){return e===t[n]?t:e!==null?(t[n]=e+u,g(t,n,l),E(t,n,_),t.UPDATE=!0,t):t[n]}function w(t,n){let e={UPDATE:!1,MOUSE_HOVER:!1,MOUSE_DOWN:!1,MOUSE_UP:!1,_id:n,_anims:{},_visible:!0,_l:0,_t:0,_w:0,_h:0,_auto_w:!0,_auto_h:!0,_font:null,_font_size:0,_font_red:0,_font_green:0,_font_blue:0,_padding_l:0,_padding_r:0,_padding_t:0,_padding_b:0,_shadow_red:0,_shadow_green:0,_shadow_blue:0,anim(l,_,u,a,c,d=null,h=null,i=null){return l in e._anims||(e._anims[l]=b(t,e,l,_,u,a,c,d,h,i)),e._anims[l]},w(l=null,_=null,u=null){return l!==null&&(e._auto_w=!1),m(e,"_w",l,_,u)},h(l=null,_=null,u=null){return l!==null&&(e._auto_h=!1),m(e,"_h",l,_,u)},auto_w(){e._auto_w=!0},auto_h(){e._auto_h=!0},l(l=null,_=null,u=null){return m(e,"_l",l,_,u)},t(l=null,_=null,u=null){return m(e,"_t",l,_,u)},r(l=null,_=null,u=null){return r===e._l+e.w()?e:r!==null?(e._l=r-e.w(),e.UPDATE=!0,e):e._l+e.w()},b(l=null,_=null,u=null){return l===e._t+e.h()?e:l!==null?(e._t=l-e.h(),e.UPDATE=!0,e):e._t+e.h()},extend_l(l=null,_=null,u=null){return l!==null?(e.w(l-e.r(),_,u),e.l(l),e.UPDATE=!0,e):e.b()},extend_t(l=null,_=null,u=null){return l!==null?(e.h(l-e.b(),_,u),e.t(l),e.UPDATE=!0,e):e.b()},extend_r(l=null,_=null,u=null){return l!==null?(e.w(l-e.l(),_,u),e.UPDATE=!0,e):e.r()},extend_b(l=null,_=null,u=null){return l!==null?(e.h(l-e.t(),_,u),e.UPDATE=!0,e):e.b()},fixed_t(){},fixed_l(){},fixed_b(){},fixed_r(){},x(l=null,_=null,u=null){return l===e._l?e:l!==null?(e._l=l-e.w()/2,e.UPDATE=!0,e):e._l+e.w()/2},y(l=null,_=null,u=null){return l===e._t?e:l!==null?(e._t=l-e.h()/2,e.UPDATE=!0,e):e._t+e.h()/2},image(l,_){},color(){},color_red(){},color_green(){},color_blue(){},text(){},padding_t(l){},padding_l(l){},padding_b(l){},padding_r(l){},padding(l=null,_=null,u=null,a=null){l!==null&&(e._padding_l=l,e.UPDATE=!0),_!==null&&(e._padding_r=_,e.UPDATE=!0),u!==null&&(e._padding_t=u,e.UPDATE=!0),a!==null&&(e._padding_b=a,e.UPDATE=!0)},font(l=null,_=null,u=null,a=null){l!==null&&(e._font_size=l,e.UPDATE=!0),_!==null&&(e._font=_,e.UPDATE=!0),g(e,"_font_size",u),E(e,"_font_size",a)},font_size(){},font_color(){},border(){},border_size_t(){},border_size_l(){},border_size_b(){},border_size_r(){},border_radius_tl(){},border_radius_tr(){},border_radius_bl(){},border_radius_br(){},shadow_color(){},shadow_red(){},shadow_green(){},shadow_blue(){},show(){return e._visible||(e._visible=!0,e.UPDATE=!0),e},hide(){return e._visible&&(e._visible=!1,e.UPDATE=!0),e}};return e}function x(t){t.width<1e3&&(t.format==="desktop"&&(t.FORMAT_SWITCH=1),t.format="mobile"),t.width>1e3&&(t.format==="mobile"&&(t.FORMAT_SWITCH=1),t.format="desktop"),t.width<window.innerHeight&&(t.orientation==="horizontal"&&(t.ORIENTATION_SWITCH=1),t.orientation="vertical"),t.width>window.innerHeight&&(t.orientation==="vertical"&&(t.ORIENTATION_SWITCH=1),t.orientation="horizontal"),t.format==="desktop"&&(t.width=document.documentElement.clientWidth,t.height=window.innerHeight,t.scroll_y=window.scrollY),t.format==="mobile"&&((t.FORMAT_SWITCH||t.ORIENTATION_SWITCH)&&(t.height=window.innerHeight),t.width=document.documentElement.clientWidth,t.scroll_y=window.scrollY);let n=Object.keys(t._virtual);for(let e=0;e<n.length;e++){let l=n[e],_=t._virtual[l],u=t._real[l];_._auto_w&&(_._w=u.clientWidth),_._auto_h&&(_._h=u.clientHeight)}}function H(t){let n=Object.keys(t._virtual);for(let e=0;e<n.length;e++){let l=n[e],_=t._virtual[l],u=t._real[l];_.UPDATE&&(_._w!==0?u.style.width=_._w+"px":u.style.width="auto",_._h!==0?u.style.height=_._h+"px":u.style.height="auto",u.style.transform="translate("+_._l+"px,"+_._t+"px)",_._font_size!==0&&(u.style.fontSize=_._font_size+"px"),_._font!==null&&(u.style.fontFamily=_._font),_._visible?u.style.display="initial":u.style.display="none"),_.MOUSE_DOWN=!1,_.MOUSE_UP=!1,_.UPDATE=!1}t.SETUP=!1,t.FORMAT_SWITCH=!1,t.ORIENTATION_SWITCH=!1}function U(t){let n={SETUP:!0,FORMAT_SWITCH:!1,ORIENTATION_SWITCH:!1,viewport:null,time:performance.now(),delta:0,root:null,format:"",orientation:"",_virtual:{},_real:{},virtual(e){return e in n._virtual||(n._virtual[e]=w(t,e)),n._virtual[e]},real(e,l){if(e in n._real)return n._real[e];let _,u=document.getElementById(e);u!=null?_=u:_=document.createElement(l),_.id=e,_.style.position="absolute",_.style.margin="0px",_.style.padding="0px",n._real[e]=_,e!=="root"&&n.real("root").append(_)},element(e,l="div"){return n.real(e,l),n.virtual(e)},collect(){x(n)},update(){H(n)},show(){},hide(){}};return n.root=n.element("root"),document.body.append(n.real("root")),n}function R(t){let n=Object.keys(t._views);for(let e=0;e<n.length;e++){let l=n[e];t._views[l].collect()}}function W(t){let n=Object.keys(t._components);for(let e=0;e<n.length;e++){let l=n[e];t._components[l](t)}}function z(t){let n=Object.keys(t._views);for(let e=0;e<n.length;e++){let l=n[e];t._views[l].update()}}function A(t){if(t.RUN===!1)return;let n=performance.now();t.delta=(n-t.time)/1e3,t.time=n,R(t),W(t),z(t),t.SETUP=!1,window.requestAnimationFrame(()=>{A(t)})}function y(){let t={SETUP:!0,RUN:!1,time:performance.now(),delta:0,_images:{},_fonts:{},_views:{},_components:{},view(n,e="dom"){return n in t._views||e==="dom"&&(t._views[n]=U(t)),t._views[n]},image(){},font(){},json(){},component(n,e){if(n in t._components)return t._components[n];t._components[n]=e},start(){t.RUN=!0,A(t)},stop(){t.RUN=!1}};return t}var O=t=>{let n=t.view("home"),e=n.element("b","button");n.SETUP&&console.log("setup"),e.x(n.root.x()).y(n.root.y()).w(100).h(25)};var P=y();P.component("example",O);P.start();})();
